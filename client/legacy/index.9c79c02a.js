import"./typeof.43072401.js";import{_ as t}from"./slicedToArray.f13a096f.js";import{P as e,a,_ as n,b as i,c,i as o,s as r,d as s,S as l,e as u,t as f,g as d,h,j as v,k as g,m,Q as b,p as w,q as p,C as k,f as y,l as E,n as C,R as I,M as T,T as _,U as A}from"./index.be2fd1e8.js";import"./index.e10c59e8.js";var B=function(){function t(){a(this,t),this.accelerometer={x:0,y:0,z:0},this.magnetometer_raw={x:0,y:0,z:0},this.magnetometer_bearing=0,this.temperature=0,this.buttonA=0,this.buttonACallBack=function(){},this.buttonB=0,this.buttonBCallBack=function(){},this.connected=!1,this.onConnectCallback=function(){},this.onDisconnectCallback=function(){},this.onBLENotifyCallback=function(){},this.characteristic={IO_PIN_DATA:{},IO_AD_CONFIG:{},IO_PIN_CONFIG:{},IO_PIN_PWM:{},LED_STATE:{},LED_TEXT:{},LED_SCROLL:{}}}return e(t,[{key:"getTemperature",value:function(){return this.temperature}},{key:"getAccelerometer",value:function(){return this.accelerometer}},{key:"getBearing",value:function(){return this.magnetometer_bearing}},{key:"getButtonA",value:function(){return this.buttonA}},{key:"setButtonACallback",value:function(t){this.buttonACallBack=t}},{key:"getButtonB",value:function(){return this.buttonB}},{key:"setButtonBCallback",value:function(t){this.buttonBCallBack=t}},{key:"onConnect",value:function(t){this.onConnectCallback=t}},{key:"onDisconnect",value:function(t){this.onDisconnectCallback=t}},{key:"onBleNotify",value:function(t){this.onBLENotifyCallback=t}},{key:"writePin",value:function(t){}},{key:"readPin",value:function(t){}},{key:"writeMatrixIcon",value:function(t){for(var e=new Int8Array(5),a=[["0","0","0","0","0","0","0","0"],["0","0","0","0","0","0","0","0"],["0","0","0","0","0","0","0","0"],["0","0","0","0","0","0","0","0"],["0","0","0","0","0","0","0","0"]],n=0;n<5;n++)for(var i=0;i<5;i++)a[n][7-i]=t[n][4-i];for(n=0;n<5;n++){var c=a[n].join("");e[n]=parseInt(c,2)}this.connected&&this.characteristic.LED_STATE.writeValue(e).then((function(t){})).catch((function(t){console.log(t)}))}},{key:"writeMatrixTextSpeed",value:function(t){var e=new Uint8Array(t);this.connected&&this.characteristic.LED_TEXT.writeValue(e).then((function(t){})).catch((function(t){console.log(t)}))}},{key:"writeMatrixText",value:function(t){var e=new Uint8Array(function(t){for(var e=[],a=0;a<t.length;a++){var n=t.charCodeAt(a);n<128?e.push(n):n<2048?e.push(192|n>>6,128|63&n):n<55296||n>=57344?e.push(224|n>>12,128|n>>6&63,128|63&n):(a++,n=65536+((1023&n)<<10|1023&t.charCodeAt(a)),e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|63&n))}return e}(t));this.connected&&this.characteristic.LED_TEXT.writeValue(e).then((function(t){})).catch((function(t){console.log(t)}))}},{key:"onButtonA",value:function(){this.buttonACallBack()}},{key:"onButtonB",value:function(){this.buttonBCallBack()}},{key:"characteristic_updated",value:function(t){this.onBLENotifyCallback(),"e95dda90-251d-470a-a062-fa1922dfa9a8"==t.target.uuid&&(this.buttonA=t.target.value.getInt8(),this.buttonA&&this.onButtonA()),"e95dda91-251d-470a-a062-fa1922dfa9a8"==t.target.uuid&&(this.buttonB=t.target.value.getInt8(),this.buttonB&&this.onButtonB()),"e95dca4b-251d-470a-a062-fa1922dfa9a8"==t.target.uuid&&(this.accelerometer.x=t.target.value.getInt16(0,!0),this.accelerometer.y=t.target.value.getInt16(2,!0),this.accelerometer.z=t.target.value.getInt16(4,!0)),"e95dfb11-251d-470a-a062-fa1922dfa9a8"==t.target.uuid&&(this.magnetometer_raw.x=t.target.value.getInt16(0,!0),this.magnetometer_raw.y=t.target.value.getInt16(2,!0),this.magnetometer_raw.z=t.target.value.getInt16(4,!0)),"e95d9715-251d-470a-a062-fa1922dfa9a8"==t.target.uuid&&(this.magnetometer_bearing=t.target.value.getInt16(0,!0)),"e95d9250-251d-470a-a062-fa1922dfa9a8"==t.target.uuid&&(this.temperature=t.target.value.getInt8())}},{key:"searchDevice",value:function(){var t=this,e={acceptAllDevices:!0,optionalServices:["e95d0753-251d-470a-a062-fa1922dfa9a8","e95df2d8-251d-470a-a062-fa1922dfa9a8","e95d9882-251d-470a-a062-fa1922dfa9a8","e95d127b-251d-470a-a062-fa1922dfa9a8","e95dd91d-251d-470a-a062-fa1922dfa9a8","e95d6100-251d-470a-a062-fa1922dfa9a8"]};console.log("Requesting Bluetooth Device..."),console.log("with "+JSON.stringify(e)),navigator.bluetooth.requestDevice(e).then((function(e){return console.log("> Name:             "+e.name),console.log("> Id:               "+e.id),e.addEventListener("gattserverdisconnected",t.onDisconnectCallback),e.gatt.connect()})).then((function(e){return t.onConnectCallback(),console.log("Getting Services..."),e.getPrimaryServices()})).then((function(e){console.log("Getting Characteristics...");var a=Promise.resolve();return e.forEach((function(e){a=a.then((function(a){return e.getCharacteristics().then((function(a){console.log("> Service: "+e.uuid),a.forEach((function(e){switch(console.log(">> Characteristic: "+e.uuid+" "+x(e)),e.uuid){case"e95d8d00-251d-470a-a062-fa1922dfa9a8":t.characteristic.IO_PIN_DATA=e;break;case"e95d5899-251d-470a-a062-fa1922dfa9a8":t.characteristic.IO_AD_CONFIG=e;break;case"e95db9fe-251d-470a-a062-fa1922dfa9a8":t.characteristic.IO_PIN_CONFIG=e;break;case"e95dd822-251d-470a-a062-fa1922dfa9a8":t.characteristic.IO_PIN_PWM=e;break;case"e95d7b77-251d-470a-a062-fa1922dfa9a8":t.characteristic.LED_STATE=e,t.connected=!0;break;case"e95d93ee-251d-470a-a062-fa1922dfa9a8":t.characteristic.LED_TEXT=e;break;case"e95d0d2d-251d-470a-a062-fa1922dfa9a8":t.characteristic.LED_SCROLL=e}x(e).includes("NOTIFY")&&(e.startNotifications().catch((function(t){return console.log("startNotifications",t)})),e.addEventListener("characteristicvaluechanged",t.characteristic_updated.bind(t)))}))}))}))})),a})).catch((function(t){console.log("Argh! "+t)}))}}]),t}();function x(t){var e=[];for(var a in t.properties)!0===t.properties[a]&&e.push(a.toUpperCase());return"["+e.join(", ")+"]"}var O=function(){function t(e){a(this,t),this.context=e,this.pausedSize=1,this.axisSize=3}return e(t,[{key:"draw_line",value:function(t,e,a,n){this.context.strokeStyle=n,this.context.lineWidth=a,this.context.lineCap="round",this.context.lineTo(t,e),this.context.stroke(),this.context.beginPath(),this.context.moveTo(t,e)}},{key:"draw_point",value:function(t,e,a,n){this.context.fillStyle=n,this.context.fillRect(t,e,a,a)}},{key:"draw_axis",value:function(t,e,a,n){this.context.fillStyle="black",this.context.fillRect(0,0,a,n),this.context.fillStyle="yellow",this.context.fillRect(t,e,this.axisSize,this.axisSize)}},{key:"mapValues",value:function(t,e,a,n,i){return(t-e)/(a-e)*(i-n)+n}}]),t}(),P=_.document,D=_.window;function L(t){var e,a,n,i,c=(t[1]?t[9][1]:t[9][0])+"";return{c:function(){e=u("div"),a=u("button"),n=f(c),this.h()},l:function(t){e=d(t,"DIV",{class:!0});var i=h(e);a=d(i,"BUTTON",{class:!0});var o=h(a);n=v(o,c),o.forEach(g),i.forEach(g),this.h()},h:function(){m(a,"class","btn svelte-15wwbf5"),m(e,"class","svelte-15wwbf5"),i=b(a,"click",t[11])},m:function(t,i){w(t,e,i),p(e,a),p(a,n)},p:function(t,e){2&e&&c!==(c=(t[1]?t[9][1]:t[9][0])+"")&&k(n,c)},d:function(t){t&&g(e),i()}}}function N(t){var e,a;return{c:function(){e=u("button"),a=f("draw"),this.h()},l:function(t){e=d(t,"BUTTON",{class:!0});var n=h(e);a=v(n,"draw"),n.forEach(g),this.h()},h:function(){m(e,"class","btn-menu svelte-15wwbf5")},m:function(t,n){w(t,e,n),p(e,a)},p:C,d:function(t){t&&g(e)}}}function R(t){var e,a,n=t[10].line?"line":"dot";return{c:function(){e=u("button"),a=f(n),this.h()},l:function(t){e=d(t,"BUTTON",{class:!0});var i=h(e);a=v(i,n),i.forEach(g),this.h()},h:function(){m(e,"class","btn-menu svelte-15wwbf5")},m:function(t,n){w(t,e,n),p(e,a)},p:C,d:function(t){t&&g(e)}}}function S(e){var a,n,i,c,o,r,s,l,T,_,A,B,x,O,S,V,z,G,U,j,F,H,M,W,q,X,Z,J,Q,Y,K,$,tt=e[0]&&L(e);function et(t,e){return t[8]?R:N}var at=et(e),nt=at(e);return{c:function(){a=y(),n=u("div"),i=u("h1"),c=f("LZRBIT"),o=y(),tt&&tt.c(),r=y(),s=u("div"),l=u("div"),nt.c(),T=y(),_=u("p"),A=f("x: "),B=f(e[5]),x=y(),O=u("p"),S=f("y: "),V=f(e[6]),z=y(),G=u("p"),U=f("z: "),j=f(e[7]),F=y(),H=u("button"),M=f("save"),W=y(),q=u("div"),X=u("canvas"),Z=y(),J=u("div"),Q=u("div"),Y=f("[!] GO TO THE TOP RIGHT CORNER AND OPEN THE CONTROLS PANEL TO DRAW [!]"),this.h()},l:function(t){a=E(t),n=d(t,"DIV",{class:!0});var u=h(n);i=d(u,"H1",{class:!0});var f=h(i);c=v(f,"LZRBIT"),f.forEach(g),o=E(u),tt&&tt.l(u),r=E(u),s=d(u,"DIV",{class:!0});var m=h(s);l=d(m,"DIV",{class:!0});var b=h(l);nt.l(b),T=E(b),_=d(b,"P",{class:!0});var w=h(_);A=v(w,"x: "),B=v(w,e[5]),w.forEach(g),x=E(b),O=d(b,"P",{class:!0});var p=h(O);S=v(p,"y: "),V=v(p,e[6]),p.forEach(g),z=E(b),G=d(b,"P",{class:!0});var k=h(G);U=v(k,"z: "),j=v(k,e[7]),k.forEach(g),F=E(b),H=d(b,"BUTTON",{class:!0});var y=h(H);M=v(y,"save"),y.forEach(g),b.forEach(g),m.forEach(g),W=E(u),q=d(u,"DIV",{hidden:!0,class:!0});var C=h(q);X=d(C,"CANVAS",{width:!0,height:!0,class:!0}),h(X).forEach(g),Z=E(C),J=d(C,"DIV",{class:!0});var I=h(J);Q=d(I,"DIV",{class:!0});var P=h(Q);Y=v(P,"[!] GO TO THE TOP RIGHT CORNER AND OPEN THE CONTROLS PANEL TO DRAW [!]"),P.forEach(g),I.forEach(g),C.forEach(g),u.forEach(g),this.h()},h:function(){P.title="LZRBTI-APP",m(i,"class","svelte-15wwbf5"),m(_,"class","svelte-15wwbf5"),m(O,"class","svelte-15wwbf5"),m(G,"class","svelte-15wwbf5"),m(H,"class","btn-menu svelte-15wwbf5"),m(l,"class","grid-container svelte-15wwbf5"),m(s,"class","flex-container svelte-15wwbf5"),m(X,"width",e[3]),m(X,"height",e[4]),m(X,"class","svelte-15wwbf5"),m(Q,"class","svelte-15wwbf5"),m(J,"class","flex-container svelte-15wwbf5"),q.hidden=K=!e[1],m(q,"class","svelte-15wwbf5"),m(n,"class","flex-container svelte-15wwbf5"),$=[b(D,"keydown",e[13]),b(H,"click",e[12])]},m:function(t,u){w(t,a,u),w(t,n,u),p(n,i),p(i,c),p(n,o),tt&&tt.m(n,null),p(n,r),p(n,s),p(s,l),nt.m(l,null),p(l,T),p(l,_),p(_,A),p(_,B),p(l,x),p(l,O),p(O,S),p(O,V),p(l,z),p(l,G),p(G,U),p(G,j),p(l,F),p(l,H),p(H,M),p(n,W),p(n,q),p(q,X),e[17](X),p(q,Z),p(q,J),p(J,Q),p(Q,Y)},p:function(e,a){var i=t(a,1)[0];e[0]?tt?tt.p(e,i):((tt=L(e)).c(),tt.m(n,r)):tt&&(tt.d(1),tt=null),at===(at=et(e))&&nt?nt.p(e,i):(nt.d(1),(nt=at(e))&&(nt.c(),nt.m(l,T))),32&i&&k(B,e[5]),64&i&&k(V,e[6]),128&i&&k(j,e[7]),8&i&&m(X,"width",e[3]),16&i&&m(X,"height",e[4]),2&i&&K!==(K=!e[1])&&(q.hidden=K)},i:C,o:C,d:function(t){t&&g(a),t&&g(n),tt&&tt.d(),nt.d(),e[17](null),I($)}}}function V(t,e,a){var n,i,c,o,r,s,l=!0,u=!1,f=new B,d=0,h=0,v=0,g={drawing:!1,name:"Brush Parameters",line:!1,sizeLine:.1,colorLine:"#9acd32",point:!1,sizePoint:.1,colorPoint:"#ff6347",save:function(){var t=document.createElement("a");document.body.appendChild(t),t.href=n.toDataURL("image/png",1),t.download="canvas-image.png",t.click(),document.body.removeChild(t)}};return T((function(){import("./dat.gui.module.46f1b6fe.js").then((function(t){var e=new t.GUI;!1===u&&(e.closed=!0);e.addFolder("Line");e.add(g,"line"),e.add(g,"sizeLine",0,2,.1),e.addColor(g,"colorLine");e.addFolder("Point");e.add(g,"point"),e.add(g,"sizePoint",0,2,.9),e.addColor(g,"colorPoint"),e.add(g,"save")})),a(3,c=window.innerWidth),a(4,o=window.innerHeight),i=n.getContext("2d");var t=new O(i);i.imageSmoothingEnabled=!0,function e(){if(i.globalCompositeOperation="lighter",u)if(!0===g.line){i.fillStyle="black",i.fillRect(0,0,c,o);var a=t.mapValues(d,-1024,1024,0,c),n=t.mapValues(h,-1024,1024,0,o);t.draw_line(a,n,g.sizeLine,g.colorLine)}else if(!0===g.point){i.fillStyle="black",i.fillRect(0,0,c,o);var l=t.mapValues(d,-1024,1024,0,c),f=t.mapValues(h,-1024,1024,0,o);t.draw_point(l,f,g.sizePoint,g.colorPoint),i.beginPath()}else if(!0===g.line&&!0===g.point){i.fillStyle="black",i.fillRect(0,0,c,o);var v=t.mapValues(d,-1024,1024,0,c),m=t.mapValues(h,-1024,1024,0,o);t.draw_line(v,m,g.sizeLine,g.colorLine),t.draw_point(v,m,g.sizePoint,g.colorPoint)}else if(" "===s){i.clearRect(0,0,c,o);var b=t.mapValues(d,-1024,1024,0,c),w=t.mapValues(h,-1024,1024,0,o);t.draw_axis(b,w,c,o)}else{i.clearRect(0,0,c,o);var p=t.mapValues(d,-1024,1024,0,c),k=t.mapValues(h,-1024,1024,0,o);t.draw_axis(p,k,c,o)}r=requestAnimationFrame(e)}()})),[l,u,n,c,o,d,h,v,s,["PAIR MICROBIT","PAIRED"],g,function(){f.searchDevice(),f.onConnect((function(){console.log("connected"),a(1,u=!0),console.log("pared: true")})),f.onBleNotify((function(){a(5,d=f.getAccelerometer().x),a(6,h=f.getAccelerometer().y),a(7,v=f.getAccelerometer().z)})),a(0,l=!1)},function(){console.log("saveDrawing");var t=document.createElement("a");document.body.appendChild(t),t.href=n.toDataURL("image/png",1),t.download="canvas-image.png",t.click(),document.body.removeChild(t)},function(t){a(8,s=t.key)},i,r,f,function(t){A[t?"unshift":"push"]((function(){a(2,n=t)}))}]}var z=function(t){function e(t){var n;return a(this,e),n=i(this,c(e).call(this)),o(s(n),t,V,S,r,{}),n}return n(e,l),e}();export default z;
